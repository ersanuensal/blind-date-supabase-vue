import{r as S,c as J,a as F,b as U,o as d,d as u,e as s,f as L,w,g as I,h,u as D,i as P,j as l,F as q,k as E,t as v,l as f,v as g,m as O,n as B,p as H,q as z,s as Z,x as K,y as X,z as G,A as Q,B as ee,C as te}from"./vendor.163acdc1.js";const se=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))e(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const r of c.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&e(r)}).observe(document,{childList:!0,subtree:!0});function n(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerpolicy&&(c.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?c.credentials="include":a.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function e(a){if(a.ep)return;a.ep=!0;const c=n(a);fetch(a.href,c)}};se();const W=S({user:null}),re={setUser(i){W.user=i?i.user:null}};var C={state:W,methods:re};const oe="https://oyioqvxlilouegwbeekh.supabase.co",ae="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJvbGUiOiJhbm9uIiwiaWF0IjoxNjQzMDQ0MjY5LCJleHAiOjE5NTg2MjAyNjl9.kTzSGH01qKcDB7tuNFODKL20eBZZm8srXFI02ZVFOD8",y=J(oe,ae);var ie="assets/logo.7c8b451f.png",A=(i,t)=>{const n=i.__vccOpts||i;for(const[e,a]of t)n[e]=a;return n};const ne={setup(){const i=F(()=>C.state.user),t=D();return{logout:async()=>{await y.auth.signOut(),t.push({name:"Login"})},user:i}}};"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("service-worker.js")});const le={class:"bg-primaryc text-white"},ce={class:"container py-5 px-4 flex flex-col gap-4 items-center sm:flex-row"},de=s("div",{class:"flex items-center gap-x-4"},[s("img",{class:"h-10",src:ie,alt:""})],-1),ue={class:"flex flex-1 justify-end gap-x-10"},me=P("Explore"),pe=P("Activities"),ve=P("Create an Activity"),_e=P("Login"),he=P("Register"),ye=P("Profile");function fe(i,t,n,e,a,c){const r=U("router-link");return d(),u("header",le,[s("nav",ce,[de,s("ul",ue,[L(r,{class:"cursor-pointer",to:{name:"Explore"}},{default:w(()=>[me]),_:1}),L(r,{class:"cursor-pointer",to:{name:"Home"}},{default:w(()=>[pe]),_:1}),e.user?(d(),I(r,{key:0,class:"cursor-pointer",to:{name:"Activity"}},{default:w(()=>[ve]),_:1})):h("",!0),e.user?h("",!0):(d(),I(r,{key:1,class:"cursor-pointer",to:{name:"Login"}},{default:w(()=>[_e]),_:1})),e.user?h("",!0):(d(),I(r,{key:2,class:"cursor-pointer",to:{name:"Register"}},{default:w(()=>[he]),_:1})),e.user?(d(),I(r,{key:3,class:"cursor-pointer",to:{name:"Profile"}},{default:w(()=>[ye]),_:1})):h("",!0),e.user?(d(),u("li",{key:4,onClick:t[0]||(t[0]=(...o)=>e.logout&&e.logout(...o)),class:"cursor-pointer"},"Logout")):h("",!0)])])])}var ge=A(ne,[["render",fe]]);const xe={components:{Navigation:ge},setup(){const i=l(null);return y.auth.user()||(i.value=!0),y.auth.onAuthStateChange((n,e)=>{C.methods.setUser(e),i.value=!0}),{appReady:i}},created(){this.$workbox&&this.$workbox.addEventListener("waiting",()=>{this.showUpdateUI=!0})}};"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("service-worker.js")});const be={key:0,class:"min-h-full font-Poppins box-border"};function we(i,t,n,e,a,c){const r=U("Navigation"),o=U("router-view");return e.appReady?(d(),u("div",be,[L(r),L(o)])):h("",!0)}var Ae=A(xe,[["render",we]]);const ke={name:"home",components:{},setup(){const i=l([]),t=l(null);return(async()=>{try{const{data:e,error:a}=await y.from("activities").select("*");if(a)throw a;i.value=e,t.value=!0}catch(e){console.warn(e.message)}})(),{data:i,dataLoaded:t}}},$e={key:0,class:"container mt-10 px-4"},Ue={key:0,class:"w-full flex flex-col items-center"},Le=s("h1",{class:"text-2xl"},"There are no Activities yet.",-1),Pe=P("Create the first One"),Me={key:1,class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"},Ie={class:"mt-2 py-1 px-3 text-xs text-primaryc bg-white shadow-md rounded-lg"},Ve={class:"mt-2 text-center text-xl text-white"},Te={class:"mt-2 text-center text-xs text-white"},Ce={class:"mt-2 text-center text-xs text-white"};function Ne(i,t,n,e,a,c){const r=U("router-link");return e.dataLoaded?(d(),u("div",$e,[e.data.length===0?(d(),u("div",Ue,[Le,L(r,{class:"mt-6 py-2 px-6 rounded-sm text-sm text-white bg-primaryc duration-200 border-solid border-2 boder-transperent hover:border-primaryc hover:bg-white hover:text-primaryc",to:{name:"Activity"}},{default:w(()=>[Pe]),_:1})])):(d(),u("div",Me,[(d(!0),u(q,null,E(e.data,(o,p)=>(d(),I(r,{class:"flex flex-col items-center bg-primaryc p-8 shadow-md cursor-pointer",to:{name:"ViewActivity",params:{id:o.id}},key:p},{default:w(()=>[s("p",Ie,v(o.date),1),s("h1",Ve,v(o.name),1),s("p",Te," In "+v(o.location)+" at "+v(o.time),1),s("p",Ce,v(o.members.length)+" people participating ",1)]),_:2},1032,["to"]))),128))]))])):h("",!0)}var je=A(ke,[["render",Ne]]);const qe={name:"login",setup(){const i=D(),t=l(null),n=l(null),e=l(null);return{email:t,password:n,errorMsg:e,login:async()=>{try{const{error:c}=await y.auth.signIn({email:t.value,password:n.value});if(c)throw c;i.push({name:"Home"})}catch(c){e.value=c.message,setTimeout(()=>{e.value=null},5e3)}}}}},Ee={class:"max-w-screen-sm mx-auto px-4 py-10"},Oe={key:0,class:"mb-10 p-4 rounded-md bg-light-grey"},ze={class:"text-red-600"},De=s("h1",{class:"text-3 text-primaryc mb-4"},"Login",-1),Re={class:"flex flex-col mb-2"},Se=s("label",{for:"email",class:"mb-1 text-sm text-primaryc"},"Email",-1),Je={class:"flex flex-col mb-2"},Fe=s("label",{for:"Password",class:"mb-1 text-sm text-primaryc"},"Password",-1),Be=s("button",{type:"submit",class:"mt-6 py-2 px-6 rounded-sm self-start text-sm text-white bg-primaryc duration-200 border-solid border-2 boder-transperent hover:border-primaryc hover:bg-white hover:text-primaryc"}," Login ",-1),He=P(" You don't have an account? "),Ge=s("span",{class:"text-primaryc"},"Register",-1);function We(i,t,n,e,a,c){const r=U("router-link");return d(),u("div",Ee,[e.errorMsg?(d(),u("div",Oe,[s("p",ze,v(e.errorMsg),1)])):h("",!0),s("form",{onSubmit:t[2]||(t[2]=O((...o)=>e.login&&e.login(...o),["prevent"])),class:"p-8 flex flex-col bg-light-grey rounded-md shadow-lg"},[De,s("div",Re,[Se,f(s("input",{type:"text",id:"email","onUpdate:modelValue":t[0]||(t[0]=o=>e.email=o),required:"",class:"p-2 text-gray-500 focus:outline-none"},null,512),[[g,e.email]])]),s("div",Je,[Fe,f(s("input",{type:"password",id:"password","onUpdate:modelValue":t[1]||(t[1]=o=>e.password=o),required:"",class:"p-2 text-gray-500 focus:outline-none"},null,512),[[g,e.password]])]),Be,L(r,{class:"text-sm text-black mt-6 text-center",to:{name:"Register"}},{default:w(()=>[He,Ge]),_:1})],32)])}var Ye=A(qe,[["render",We]]);const Ze={name:"register",setup(){const i=D(),t=l(null),n=l(null),e=l(null),a=l(null);return{email:t,password:n,confirmPassword:e,errorMsg:a,register:async()=>{if(n.value===e.value){try{const{error:r}=await y.auth.signUp({email:t.value,password:n.value});if(r)throw r;i.push({name:"Login"})}catch(r){a.value=r.message,setTimeout(()=>{a.value=null},5e3)}return}a.value="Error: Passwords do not match",setTimeout(()=>{a.value=null},5e3)}}}},Ke={class:"max-w-screen-sm mx-auto px-4 py-10"},Xe={key:0,class:"mb-10 p-4 rounded-md bg-light-grey"},Qe={class:"text-red-600"},et=s("h1",{class:"text-3 text-primaryc mb-4"},"Register",-1),tt={class:"flex flex-col mb-2"},st=s("label",{for:"email",class:"mb-1 text-sm text-primaryc"},"Email",-1),rt={class:"flex flex-col mb-2"},ot=s("label",{for:"Password",class:"mb-1 text-sm text-primaryc"},"Password",-1),at={class:"flex flex-col mb-2"},it=s("label",{for:"confirmPassword",class:"mb-1 text-sm text-primaryc"},"Confirm Password",-1),nt=s("button",{type:"submit",class:"mt-6 py-2 px-6 rounded-sm self-start text-sm text-white bg-primaryc duration-200 border-solid border-2 boder-transperent hover:border-primaryc hover:bg-white hover:text-primaryc"},"Register",-1),lt=P(" Already registered? "),ct=s("span",{class:"text-primaryc"},"Login",-1);function dt(i,t,n,e,a,c){const r=U("router-link");return d(),u("div",Ke,[e.errorMsg?(d(),u("div",Xe,[s("p",Qe,v(e.errorMsg),1)])):h("",!0),s("form",{onSubmit:t[3]||(t[3]=O((...o)=>e.register&&e.register(...o),["prevent"])),class:"p-8 flex flex-col bg-light-grey rounded-md shadow-lg"},[et,s("div",tt,[st,f(s("input",{type:"text",id:"email","onUpdate:modelValue":t[0]||(t[0]=o=>e.email=o),required:"",class:"p-2 text-gray-500 focus:outline-none"},null,512),[[g,e.email]])]),s("div",rt,[ot,f(s("input",{type:"password",id:"password","onUpdate:modelValue":t[1]||(t[1]=o=>e.password=o),required:"",class:"p-2 text-gray-500 focus:outline-none"},null,512),[[g,e.password]])]),s("div",at,[it,f(s("input",{type:"password",id:"confirmPassword","onUpdate:modelValue":t[2]||(t[2]=o=>e.confirmPassword=o),required:"",class:"p-2 text-gray-500 focus:outline-none"},null,512),[[g,e.confirmPassword]])]),nt,L(r,{class:"text-sm text-black mt-6 text-center",to:{name:"Login"}},{default:w(()=>[lt,ct]),_:1})],32)])}var ut=A(Ze,[["render",dt]]);const mt="https://oyioqvxlilouegwbeekh.supabase.co",pt="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJvbGUiOiJhbm9uIiwiaWF0IjoxNjQzMDQ0MjY5LCJleHAiOjE5NTg2MjAyNjl9.kTzSGH01qKcDB7tuNFODKL20eBZZm8srXFI02ZVFOD8",V=J(mt,pt),N=S({user:{}});const vt={props:{path:String},emits:["upload","update:path"],setup(i,{emit:t}){const{path:n}=B(i),e=l("10em"),a=l(!1),c=l(""),r=l(),o=async()=>{try{const{data:m,error:_}=await V.storage.from("avatars").download(n.value);if(_)throw _;c.value=URL.createObjectURL(m)}catch(m){console.error("Error downloading image: ",m.message)}},p=async m=>{r.value=m.target.files;try{if(a.value=!0,!r.value||r.value.length===0)throw new Error("You must select an image to upload.");const _=r.value[0],$=_.name.split(".").pop(),T=`${`${Math.random()}.${$}`}`;let{error:b}=await V.storage.from("avatars").upload(T,_);if(b)throw b;t("update:path",T),t("upload")}catch(_){alert(_.message)}finally{a.value=!1}};return H(n,()=>{n.value&&o()}),{path:n,size:e,uploading:a,src:c,files:r,uploadAvatar:p}}},_t={class:"flex flex-col items-center"},ht=["src"],yt={class:"text-center py-10"},ft={class:"mt-6 py-2 px-6 rounded-sm self-start text-sm text-white bg-primaryc duration-200 border-solid border-2 boder-transperent hover:border-primaryc hover:bg-white hover:text-primaryc",for:"single"},gt=["disabled"];function xt(i,t,n,e,a,c){return d(),u("div",null,[s("div",_t,[e.src?(d(),u("img",{key:0,src:e.src,alt:"Avatar",class:"avatar image",style:z({height:e.size,width:e.size})},null,12,ht)):(d(),u("div",{key:1,class:"avatar no-image",style:z({height:e.size,width:e.size})},null,4)),s("div",yt,[s("label",ft,v(e.uploading?"Uploading ...":"Upload new Picture"),1),s("input",{style:{visibility:"hidden",position:"absolute"},type:"file",id:"single",accept:"image/*",onChange:t[0]||(t[0]=(...r)=>e.uploadAvatar&&e.uploadAvatar(...r)),disabled:e.uploading},null,40,gt)])])])}var bt=A(vt,[["render",xt]]);const wt={components:{Avatar:bt},setup(){const i=l(!0),t=l(""),n=l(""),e=l(""),a=l(""),c=l(null),r=l(null);async function o(){try{i.value=!0,N.user=V.auth.user();let{data:m,error:_,status:$}=await V.from("profiles").select("username, gender, avatar_url, interests").eq("id",N.user.id).single();if(_&&$!==406)throw _;m&&(t.value=m.username,n.value=m.gender,a.value=m.avatar_url,e.value=m.interests)}catch(m){alert(m.message)}finally{i.value=!1}}async function p(){try{i.value=!0,N.user=V.auth.user();const m={id:N.user.id,username:t.value,gender:n.value,avatar_url:a.value,updated_at:new Date,interests:e.value};let{error:_}=await V.from("profiles").upsert(m,{returning:"minimal"});if(r.value="Profile successfully updated.",setTimeout(()=>{r.value=null},5e3),_)throw _}catch(m){c.value=m.message,setTimeout(()=>{r.value=null},5e3)}finally{i.value=!1}}return Z(()=>{o()}),{store:N,loading:i,username:t,gender:n,avatar_url:a,interests:e,errorMsg:c,statusMsg:r,updateProfile:p}}},At={class:"max-w-screen-sm mx-auto px-4 py-10"},kt={key:0,class:"mb-10 p-4 rounded-md shadow-md bg-light-grey"},$t={class:"test-primaryc"},Ut={class:"test-red-500"},Lt={class:"flex flex-col mb-2"},Pt=s("label",{for:"email",class:"mb-1 text-sm text-primaryc"},"Email",-1),Mt=["value"],It={class:"flex flex-col mb-2"},Vt=s("label",{for:"username",class:"mb-1 text-sm text-primaryc"},"Username",-1),Tt={class:"flex flex-col mb-2"},Ct=s("label",{for:"gender",class:"mb-1 text-sm text-primaryc"},"Gender",-1),Nt={class:"flex flex-col mb-2"},jt=s("label",{for:"interests",class:"mb-1 text-sm text-primaryc"},"Interests",-1),qt=["value","disabled"];function Et(i,t,n,e,a,c){const r=U("Avatar");return d(),u("div",At,[e.statusMsg||e.errorMsg?(d(),u("div",kt,[s("p",$t,v(e.statusMsg),1),s("p",Ut,v(e.errorMsg),1)])):h("",!0),s("form",{onSubmit:t[4]||(t[4]=O((...o)=>e.updateProfile&&e.updateProfile(...o),["prevent"])),class:"p-8 flex flex-col bg-light-grey rounded-md shadow-lg"},[L(r,{path:e.avatar_url,"onUpdate:path":t[0]||(t[0]=o=>e.avatar_url=o),onUpload:e.updateProfile},null,8,["path","onUpload"]),s("div",Lt,[Pt,s("input",{id:"email",type:"text",value:e.store.user.email,disabled:"",required:"",class:"p-2 text-gray-500 focus:outline-none"},null,8,Mt)]),s("div",It,[Vt,f(s("input",{id:"username",type:"text",placeholder:"Please set a Username","onUpdate:modelValue":t[1]||(t[1]=o=>e.username=o),class:"p-2 text-gray-500 focus:outline-none"},null,512),[[g,e.username]])]),s("div",Tt,[Ct,f(s("input",{id:"gender",type:"text",placeholder:"Please set a Gender.","onUpdate:modelValue":t[2]||(t[2]=o=>e.gender=o),class:"p-2 text-gray-500 focus:outline-none"},null,512),[[g,e.gender]])]),s("div",Nt,[jt,f(s("textarea",{id:"interests",type:"textarea","onUpdate:modelValue":t[3]||(t[3]=o=>e.interests=o),placeholder:"Write something about yourself.",rows:"4",class:"p-2 h-50 text-gray-500 focus:outline-none resize-none"},null,512),[[g,e.interests]])]),s("button",{type:"submit",value:e.loading?"Loading ...":"Update",disabled:e.loading,class:"mt-6 py-2 px-6 rounded-sm self-start text-sm text-white bg-primaryc duration-200 border-solid border-2 boder-transperent hover:border-primaryc hover:bg-white hover:text-primaryc"},"Update",8,qt)],32)])}var Ot=A(wt,[["render",Et]]),zt="assets/trash.8e4eb5f3.png";const Dt={setup(){const i=l(""),t=l("select-activity"),n=l(""),e=l([]),a=l(""),c=l(""),r=l(""),o=l(null),p=l(null),m=()=>{if(t.value==="others"){e.value.push({id:X(),description:""});return}};return{ActivityName:i,ActivityType:t,ActivityDescription:n,ActivityDate:a,ActivityTime:c,ActivityLocation:r,activity:e,statusMsg:o,errorMsg:p,addActivity:m,removeActivity:T=>{if(e.value.length>1){e.value=e.value.filter(b=>b.id!==T);return}p.value="You must have at least one activity",setTimeout(()=>{p.value=null},5e3)},activityChange:()=>{e.value=[],m()},createActivity:async T=>{try{const{error:b}=await y.from("activities").insert({name:i.value,type:t.value,date:a.value,time:c.value,location:r.value,activity:e.value});if(b)throw b;o.value="Sucess. Activity Created",i.value=null,t.value="select-activity",e.value=[],setTimeout(()=>{o.value=null},5e3)}catch(b){p.value=b.message,setTimeout(()=>{p.value=null},5e3)}}}}},Rt={class:"max-w-screen-md mx-auto px-4 py-10"},St={key:0,class:"mb-10 p-4 bg-light-grey rounded-md"},Jt={class:"text-black-500"},Ft={class:"text-red-500"},Bt={class:"p-8 flex items-start bg-light-grey rounded-md shadow-lg"},Ht=s("h1",{class:"text-2xl text-primaryc"},"Create an Activity",-1),Gt={class:"flex flex-col"},Wt=s("label",{for:"activity-name",class:"mb-1 text-sm text-primaryc"},"Activity Name",-1),Yt={class:"flex flex-col"},Zt=s("label",{for:"select-activity",class:"mb-1 text-sm text-primaryc"},"Activity Type",-1),Kt=s("option",{value:"select-activity"},"Select Activity Type",-1),Xt=s("option",{value:"sports"},"Sports",-1),Qt=s("option",{value:"others"},"Others",-1),es=[Kt,Xt,Qt],ts={key:0,class:"flex flex-col py-4 gap-y-4"},ss={class:"flex flex-col md:w-2/3"},rs=s("label",{for:"activity",class:"mb-1 text-sm text-primaryc"}," Activity Description ",-1),os=["onUpdate:modelValue"],as={class:"flex flex-col flex-1"},is=s("label",{for:"duration",class:"mb-1 text-sm text-primaryc"}," Duration ",-1),ns=["onUpdate:modelValue"],ls=["onClick"],cs={class:"flex flex-col"},ds=s("label",{for:"activity-date",class:"mb-1 text-sm text-primaryc"},"Activity Date",-1),us={class:"flex flex-col"},ms=s("label",{for:"activity-time",class:"mb-1 text-sm text-primaryc"},"Activity Time",-1),ps={class:"flex flex-col"},vs=s("label",{for:"activity-location",class:"mb-1 text-sm text-primaryc"},"Activity Location",-1),_s=s("button",{type:"submit",class:"mt-6 py-2 px-6 rounded-sm self-start text-sm text-white bg-primaryc duration-200 border-solid border-2 boder-transperent hover:border-primaryc hover:bg-white hover:text-primaryc"}," Create ",-1);function hs(i,t,n,e,a,c){return d(),u("div",Rt,[e.statusMsg||e.errorMsg?(d(),u("div",St,[s("p",Jt,v(e.statusMsg),1),s("p",Ft,v(e.errorMsg),1)])):h("",!0),s("div",Bt,[s("form",{onSubmit:t[7]||(t[7]=O((...r)=>e.createActivity&&e.createActivity(...r),["prevent"])),class:"flex flex-col gap-y-5 w-full"},[Ht,s("div",Gt,[Wt,f(s("input",{type:"text",required:"",class:"p-2 text-gray-500 focus:outline-none",placeholder:"Activity Name",id:"activity-name","onUpdate:modelValue":t[0]||(t[0]=r=>e.ActivityName=r)},null,512),[[g,e.ActivityName]])]),s("div",Yt,[Zt,f(s("select",{required:"",class:"p-2 text-gray-500 focus:outline-none",id:"select-activity",onChange:t[1]||(t[1]=(...r)=>e.activityChange&&e.activityChange(...r)),"onUpdate:modelValue":t[2]||(t[2]=r=>e.ActivityType=r)},es,544),[[K,e.ActivityType]]),e.ActivityType==="others"?(d(),u("div",ts,[(d(!0),u(q,null,E(e.activity,(r,o)=>(d(),u("div",{class:"flex flex-col gap-x-6 gap-y-2 relative md:flex-row",key:o},[s("div",ss,[rs,f(s("input",{required:"",type:"text",class:"p-2 w-full text-gray-500 focus:outline-none","onUpdate:modelValue":p=>r.description=p},null,8,os),[[g,r.description]])]),s("div",as,[is,f(s("input",{required:"",type:"text",class:"p-2 w-full text-gray-500 focus:outline-none","onUpdate:modelValue":p=>r.duration=p},null,8,ns),[[g,r.duration]]),s("img",{onClick:p=>e.removeActivity(r.id),src:zt,class:"h-4 w-auto absolute -left-5 cursor-pointer",alt:""},null,8,ls)])]))),128)),s("button",{onClick:t[3]||(t[3]=(...r)=>e.addActivity&&e.addActivity(...r)),class:"mt-6 py-2 px-6 rounded-sm self-start text-sm text-white bg-primaryc duration-200 border-solid border-2 boder-transperent hover:border-primaryc hover:bg-white hover:text-primaryc"}," Add Activity ")])):h("",!0)]),s("div",cs,[ds,f(s("input",{required:"",type:"date",class:"p-2 text-gray-500 focus:outline-none",id:"activity-date","onUpdate:modelValue":t[4]||(t[4]=r=>e.ActivityDate=r)},null,512),[[g,e.ActivityDate]])]),s("div",us,[ms,f(s("input",{required:"",type:"time",class:"p-2 text-gray-500 focus:outline-none",id:"activity-time","onUpdate:modelValue":t[5]||(t[5]=r=>e.ActivityTime=r)},null,512),[[g,e.ActivityTime]])]),s("div",ps,[vs,f(s("input",{required:"",type:"text",class:"p-2 text-gray-500 focus:outline-none",id:"activity-location","onUpdate:modelValue":t[6]||(t[6]=r=>e.ActivityLocation=r)},null,512),[[g,e.ActivityLocation]])]),_s],32)])])}var ys=A(Dt,[["render",hs]]);const fs={name:"view-activity",setup(){const i=l(null),t=l(null),n=l(null),e=l(null),a=l(null),c=G(),r=F(()=>C.state.user),o=l(null),p=l(null),m=l(null);let _;const $=c.params.id,j=async()=>{try{const{data:x,error:k}=await y.from("activities").select("*").eq("id",$);if(k)throw k;i.value=x[0],n.value=!0}catch(x){e.value=x.message,setTimeout(()=>{e.value=null},5e3)}};j(),(async()=>{try{const{data:x,error:k}=await y.from("profiles").select("username").eq("id",r.value.id);if(k)throw k;m.value=x[0].username,_=x[0].username}catch(x){e.calue=x.message,setTimeout(()=>{e.value=null},5e3)}})(r.value.id);const b=async()=>{const x=[];let k=[];try{const{data:M,error:nr}=await y.from("instanceOfActivities").select("user").eq("activity_id",$);x.value=M}catch(M){e.value=M.message,setTimeout(()=>{e.value=null},5e3)}x.value.forEach(M=>{k.push(M.user)}),p.value=!0,o.value=k};return b(),{data:i,dataLoaded:n,errorMsg:e,statusMsg:a,getData:j,user:r,joinActivity:async x=>{try{const{data:k,error:M}=await y.from("instanceOfActivities").insert({activity_id:$,user:x});if(M)throw M;a.value="You joined this activity",setTimeout(()=>{a.value=null},5e3)}catch(k){e.value=k.message,setTimeout(()=>{e.value=null},5e3)}window.location.reload()},checkParticipation:b,members:o,membersLoaded:p,username:m,userParticipated:t}}},gs={class:"max-w-screen-sm mx-auto px-4 py-10"},xs={key:0,class:"mb-10 p-4 rounded-md shadow-md bg-light-grey"},bs={class:"test-primaryc"},ws={class:"test-red-500"},As={key:1},ks={class:"flex flex-col items-center p-8 rounded-md shadow-md bg-light-grey relative"},$s={class:"mt-2 py-1 px-3 text-xs text-white bg-primaryc shadow-md rounded-lg"},Us={class:"mt-2 text-center text-xl text-primaryc"},Ls={class:"mt-2 text-center text-xl text-primaryc"},Ps={key:0,class:"mt-2 text-center text-xl text-primaryc"},Ms={key:1,class:"flex self-center gap-x-2"},Is={key:2,class:"flex self-center gap-x-2"},Vs={class:"flex flex-col mt-6 items-center p-8 rounded-md shadow-md bg-light-grey relative"},Ts={key:0,class:"mt-2 py-1 px-3 text-xl text-white bg-primaryc shadow-md rounded-lg"},Cs={class:"mt-2 text-center text-xl text-primaryc cursor-pointer"};function Ns(i,t,n,e,a,c){const r=U("router-link");return d(),u("div",gs,[e.statusMsg||e.errorMsg?(d(),u("div",xs,[s("p",bs,v(e.statusMsg),1),s("p",ws,v(e.errorMsg),1)])):h("",!0),e.dataLoaded?(d(),u("div",As,[s("div",ks,[s("p",$s,v(e.data.date)+" - "+v(e.data.type),1),s("h1",Us,v(e.data.name),1),s("p",Ls," In "+v(e.data.location)+" at "+v(e.data.time),1),e.data.type=="others"?(d(),u("p",Ps," Doing "+v(e.data.activity[0].description)+" for "+v(e.data.activity[0].duration),1)):h("",!0),e.members!=null&&e.members.includes(e.username)?(d(),u("div",Ms,[s("div",{class:"mt-2 py-2 px-6 rounded-sm self-start cursor-pointer text-sm text-white bg-primaryc duration-200 border-solid border-2 boder-transperent hover:border-primaryc hover:bg-white hover:text-primaryc",onClick:t[0]||(t[0]=o=>e.joinActivity(e.username))}," Leave this Activity ")])):(d(),u("div",Is,[s("div",{class:"mt-2 py-2 px-6 rounded-sm self-start cursor-pointer text-sm text-white bg-primaryc duration-200 border-solid border-2 boder-transperent hover:border-primaryc hover:bg-white hover:text-primaryc",onClick:t[1]||(t[1]=o=>e.joinActivity(e.username))}," Join this Activity ")]))]),s("div",Vs,[e.membersLoaded?(d(),u("p",Ts," people participating: ")):h("",!0),(d(!0),u(q,null,E(e.members,(o,p)=>(d(),I(r,{to:{name:"ViewProfile",params:{username:o}},key:p},{default:w(()=>[s("p",Cs,v(o),1)]),_:2},1032,["to"]))),128))])])):h("",!0)])}var js=A(fs,[["render",Ns]]);const qs={props:{path:String},setup(i){const{path:t}=B(i),n=l("30em"),e=l(!1),a=l(""),c=l(),r=async()=>{try{const{data:o,error:p}=await V.storage.from("avatars").download(t.value);if(p)throw p;a.value=URL.createObjectURL(o)}catch(o){console.error("Error downloading image: ",o.message)}};return H(t,()=>{t.value&&r()}),{path:t,size:n,uploading:e,src:a,files:c}}},Es={class:"flex flex-col items-center"},Os=["src"];function zs(i,t,n,e,a,c){return d(),u("div",null,[s("div",Es,[e.src?(d(),u("img",{key:0,src:e.src,alt:"Avatar",class:"avatar image",style:z({height:e.size,width:e.size})},null,12,Os)):(d(),u("div",{key:1,class:"avatar no-image",style:z({height:e.size,width:e.size})},null,4))])])}var Y=A(qs,[["render",zs]]);const Ds={name:"view-profile",components:{Avatar:Y},setup(){const i=l(null),t=G(),n=l(!0),e=l(""),a=l(""),c=l(""),r=l(""),o=t.params.username;async function p(){try{n.value=!0,C.user=y.auth.user();let{data:m,error:_,status:$}=await y.from("profiles").select("username, gender, avatar_url, interests").eq("username",o).single();if(_&&$!==406)throw _;m&&(e.value=m.username,a.value=m.gender,c.value=m.avatar_url,i.value=!0,r.value=m.interests,console.log(c.value))}catch(m){alert(m.message)}finally{n.value=!1}}return p(),{dataLoaded:i,loading:n,username:e,gender:a,avatar_url:c,interests:r}}},Rs={class:"max-w-screen-sm mx-auto px-4 py-10"},Ss={class:"p-8 flex flex-col items-center bg-light-grey rounded-md shadow-lg"},Js={class:"text-primaryc text-xl"},Fs={class:"text-primaryc"},Bs={class:"text-primaryc"};function Hs(i,t,n,e,a,c){const r=U("Avatar");return d(),u("div",Rs,[s("div",Ss,[s("h1",Js,"Profile of "+v(e.username),1),L(r,{path:e.avatar_url,"onUpdate:path":t[0]||(t[0]=o=>e.avatar_url=o)},null,8,["path"]),s("p",Fs,"Gender: "+v(e.gender),1),s("p",Bs,"Interests: "+v(e.interests),1)])])}var Gs=A(Ds,[["render",Hs]]);const Ws={name:"explore",components:{Avatar:Y},setup(){const i=l([]),t=l(null),n=l(!1);l(""),l("");const e=c=>{var r="https://avatars.dicebear.com/api/personas/"+c+".svg";return r};async function a(){try{n.value=!1,C.user=y.auth.user();const{data:c,error:r}=await y.from("profiles").select("username, gender, avatar_url");if(r)throw r;i&&(i.value=c,t.value=!0)}catch(c){console.warn(c.message)}finally{setTimeout(()=>{n.value=!0},1e3)}}return a(),{dataLoaded:t,loading:n,data:i,getImgUrl:e}}},Ys={class:"max-w-screen-sm mx-auto px-4 py-10"},Zs={key:0,class:"w-full flex flex-col items-center"},Ks=s("h1",{class:"text-2xl"},"There are no Users yet.",-1),Xs=[Ks],Qs={key:1,class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-2 gap-6"},er=["src"],tr={class:"mt-2 py-1 px-3 text-xl text-primaryc bg-white shadow-md rounded-lg"},sr={class:"mt-2 text-center text-xl text-white"};function rr(i,t,n,e,a,c){const r=U("router-link");return d(),u("div",Ys,[e.data.length===0?(d(),u("div",Zs,Xs)):(d(),u("div",Qs,[(d(!0),u(q,null,E(e.data,(o,p)=>(d(),I(r,{class:"flex flex-col items-center bg-primaryc p-8 shadow-md cursor-pointer",to:{name:"ViewProfile",params:{username:o.username}},key:p},{default:w(()=>[s("img",{src:e.getImgUrl(o.username),alt:""},null,8,er),s("p",tr,v(o.username),1),s("h1",sr,v(o.gender),1)]),_:2},1032,["to"]))),128))]))])}var or=A(Ws,[["render",rr]]);const ar=[{path:"/",name:"Home",component:je,meta:{title:"Home",auth:!0}},{path:"/explore",name:"Explore",component:or,meta:{title:"Explore",auth:!0}},{path:"/login",name:"Login",component:Ye,meta:{title:"Login",auth:!1}},{path:"/register",name:"Register",component:ut,meta:{title:"Sign Up",auth:!1}},{path:"/profile",name:"Profile",component:Ot,meta:{title:"Profile",auth:!0}},{path:"/activity",name:"Activity",component:ys,meta:{title:"Create Activity",auth:!0}},{path:"/view-activity/:id",name:"ViewActivity",component:js,meta:{title:"View Activity",auth:!0}},{path:"/view-profile/:username",name:"ViewProfile",component:Gs,meta:{title:"View Profile",auth:!0}}],R=Q({history:ee(),routes:ar});R.beforeEach((i,t,n)=>{document.title=`${i.meta.title} | Meet People`,n()});R.beforeEach((i,t,n)=>{const e=y.auth.user();if(i.matched.some(a=>a.meta.auth)){if(e){n();return}n({name:"Login"});return}n()});te(Ae).use(R).mount("#app");
