import{r as J,c as E,a as F,b as $,o as d,d as u,e as s,f as M,w as k,g as C,h as _,u as z,i as P,j as l,F as D,k as R,t as v,l as h,v as f,m as q,n as B,p as H,q as O,s as Z,x as K,y as X,z as G,A as Q,B as W,C as ee}from"./vendor.163acdc1.js";const te=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))e(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const r of c.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&e(r)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerpolicy&&(c.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?c.credentials="include":o.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function e(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}};te();const Y=J({user:null}),se={setUser(i){Y.user=i?i.user:null}};var j={state:Y,methods:se};const re="https://oyioqvxlilouegwbeekh.supabase.co",oe="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJvbGUiOiJhbm9uIiwiaWF0IjoxNjQzMDQ0MjY5LCJleHAiOjE5NTg2MjAyNjl9.kTzSGH01qKcDB7tuNFODKL20eBZZm8srXFI02ZVFOD8",g=E(re,oe);var ae="assets/logo.7c8b451f.png",A=(i,t)=>{const n=i.__vccOpts||i;for(const[e,o]of t)n[e]=o;return n};const ie={setup(){const i=F(()=>j.state.user),t=z();return{logout:async()=>{await g.auth.signOut(),t.push({name:"Login"})},user:i}}},ne={class:"bg-primaryc text-white"},le={class:"container py-5 px-4 flex flex-col gap-4 items-center sm:flex-row"},ce=s("div",{class:"flex items-center gap-x-4"},[s("img",{class:"h-10",src:ae,alt:""})],-1),de={class:"flex flex-1 justify-end gap-x-10"},ue=P("Home"),me=P("Create an Activity"),pe=P("Login"),ve=P("Register"),ye=P("Profile");function _e(i,t,n,e,o,c){const r=$("router-link");return d(),u("header",ne,[s("nav",le,[ce,s("ul",de,[M(r,{class:"cursor-pointer",to:{name:"Home"}},{default:k(()=>[ue]),_:1}),e.user?(d(),C(r,{key:0,class:"cursor-pointer",to:{name:"Activity"}},{default:k(()=>[me]),_:1})):_("",!0),e.user?_("",!0):(d(),C(r,{key:1,class:"cursor-pointer",to:{name:"Login"}},{default:k(()=>[pe]),_:1})),e.user?_("",!0):(d(),C(r,{key:2,class:"cursor-pointer",to:{name:"Register"}},{default:k(()=>[ve]),_:1})),e.user?(d(),C(r,{key:3,class:"cursor-pointer",to:{name:"Profile"}},{default:k(()=>[ye]),_:1})):_("",!0),e.user?(d(),u("li",{key:4,onClick:t[0]||(t[0]=(...a)=>e.logout&&e.logout(...a)),class:"cursor-pointer"},"Logout")):_("",!0)])])])}var he=A(ie,[["render",_e]]);const fe={components:{Navigation:he},setup(){const i=l(null);return g.auth.user()||(i.value=!0),g.auth.onAuthStateChange((n,e)=>{j.methods.setUser(e),i.value=!0}),{appReady:i}}},ge={key:0,class:"min-h-full font-Poppins box-border"};function xe(i,t,n,e,o,c){const r=$("Navigation"),a=$("router-view");return e.appReady?(d(),u("div",ge,[M(r),M(a)])):_("",!0)}var be=A(fe,[["render",xe]]);const we={name:"home",components:{},setup(){const i=l([]),t=l(null);return(async()=>{try{const{data:e,error:o}=await g.from("activities").select("*");if(o)throw o;i.value=e,t.value=!0}catch(e){console.warn(e.message)}})(),{data:i,dataLoaded:t}}},Ae={key:0,class:"container mt-10 px-4"},ke={key:0,class:"w-full flex flex-col items-center"},$e=s("h1",{class:"text-2xl"},"There are no Activities yet.",-1),Ue=P("Create the first One"),Le={key:1,class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"},Me={class:"mt-2 py-1 px-3 text-xs text-primaryc bg-white shadow-md rounded-lg"},Pe={class:"mt-2 text-center text-xl text-white"},Ve={class:"mt-2 text-center text-xs text-white"},Ie={class:"mt-2 text-center text-xs text-white"};function Ce(i,t,n,e,o,c){const r=$("router-link");return e.dataLoaded?(d(),u("div",Ae,[e.data.length===0?(d(),u("div",ke,[$e,M(r,{class:"mt-6 py-2 px-6 rounded-sm text-sm text-white bg-primaryc duration-200 border-solid border-2 boder-transperent hover:border-primaryc hover:bg-white hover:text-primaryc",to:{name:"Activity"}},{default:k(()=>[Ue]),_:1})])):(d(),u("div",Le,[(d(!0),u(D,null,R(e.data,(a,m)=>(d(),C(r,{class:"flex flex-col items-center bg-primaryc p-8 shadow-md cursor-pointer",to:{name:"ViewActivity",params:{id:a.id}},key:m},{default:k(()=>[s("p",Me,v(a.date),1),s("h1",Pe,v(a.name),1),s("p",Ve," In "+v(a.location)+" at "+v(a.time),1),s("p",Ie,v(a.members.length)+" people participating ",1)]),_:2},1032,["to"]))),128))]))])):_("",!0)}var Te=A(we,[["render",Ce]]);const Ne={name:"login",setup(){const i=z(),t=l(null),n=l(null),e=l(null);return{email:t,password:n,errorMsg:e,login:async()=>{try{const{error:c}=await g.auth.signIn({email:t.value,password:n.value});if(c)throw c;i.push({name:"Home"})}catch(c){e.value=c.message,setTimeout(()=>{e.value=null},5e3)}}}}},qe={class:"max-w-screen-sm mx-auto px-4 py-10"},Oe={key:0,class:"mb-10 p-4 rounded-md bg-light-grey"},je={class:"text-red-600"},ze=s("h1",{class:"text-3 text-primaryc mb-4"},"Login",-1),De={class:"flex flex-col mb-2"},Re=s("label",{for:"email",class:"mb-1 text-sm text-primaryc"},"Email",-1),Se={class:"flex flex-col mb-2"},Je=s("label",{for:"Password",class:"mb-1 text-sm text-primaryc"},"Password",-1),Ee=s("button",{type:"submit",class:"mt-6 py-2 px-6 rounded-sm self-start text-sm text-white bg-primaryc duration-200 border-solid border-2 boder-transperent hover:border-primaryc hover:bg-white hover:text-primaryc"}," Login ",-1),Fe=P(" You don't have an account? "),Be=s("span",{class:"text-primaryc"},"Register",-1);function He(i,t,n,e,o,c){const r=$("router-link");return d(),u("div",qe,[e.errorMsg?(d(),u("div",Oe,[s("p",je,v(e.errorMsg),1)])):_("",!0),s("form",{onSubmit:t[2]||(t[2]=q((...a)=>e.login&&e.login(...a),["prevent"])),class:"p-8 flex flex-col bg-light-grey rounded-md shadow-lg"},[ze,s("div",De,[Re,h(s("input",{type:"text",id:"email","onUpdate:modelValue":t[0]||(t[0]=a=>e.email=a),required:"",class:"p-2 text-gray-500 focus:outline-none"},null,512),[[f,e.email]])]),s("div",Se,[Je,h(s("input",{type:"password",id:"password","onUpdate:modelValue":t[1]||(t[1]=a=>e.password=a),required:"",class:"p-2 text-gray-500 focus:outline-none"},null,512),[[f,e.password]])]),Ee,M(r,{class:"text-sm text-black mt-6 text-center",to:{name:"Register"}},{default:k(()=>[Fe,Be]),_:1})],32)])}var Ge=A(Ne,[["render",He]]);const Ye={name:"register",setup(){const i=z(),t=l(null),n=l(null),e=l(null),o=l(null);return{email:t,password:n,confirmPassword:e,errorMsg:o,register:async()=>{if(n.value===e.value){try{const{error:r}=await g.auth.signUp({email:t.value,password:n.value});if(r)throw r;i.push({name:"Login"})}catch(r){o.value=r.message,setTimeout(()=>{o.value=null},5e3)}return}o.value="Error: Passwords do not match",setTimeout(()=>{o.value=null},5e3)}}}},Ze={class:"max-w-screen-sm mx-auto px-4 py-10"},Ke={key:0,class:"mb-10 p-4 rounded-md bg-light-grey"},Xe={class:"text-red-600"},Qe=s("h1",{class:"text-3 text-primaryc mb-4"},"Register",-1),We={class:"flex flex-col mb-2"},et=s("label",{for:"email",class:"mb-1 text-sm text-primaryc"},"Email",-1),tt={class:"flex flex-col mb-2"},st=s("label",{for:"Password",class:"mb-1 text-sm text-primaryc"},"Password",-1),rt={class:"flex flex-col mb-2"},ot=s("label",{for:"confirmPassword",class:"mb-1 text-sm text-primaryc"},"Confirm Password",-1),at=s("button",{type:"submit",class:"mt-6 py-2 px-6 rounded-sm self-start text-sm text-white bg-primaryc duration-200 border-solid border-2 boder-transperent hover:border-primaryc hover:bg-white hover:text-primaryc"},"Register",-1),it=P(" Already registered? "),nt=s("span",{class:"text-primaryc"},"Login",-1);function lt(i,t,n,e,o,c){const r=$("router-link");return d(),u("div",Ze,[e.errorMsg?(d(),u("div",Ke,[s("p",Xe,v(e.errorMsg),1)])):_("",!0),s("form",{onSubmit:t[3]||(t[3]=q((...a)=>e.register&&e.register(...a),["prevent"])),class:"p-8 flex flex-col bg-light-grey rounded-md shadow-lg"},[Qe,s("div",We,[et,h(s("input",{type:"text",id:"email","onUpdate:modelValue":t[0]||(t[0]=a=>e.email=a),required:"",class:"p-2 text-gray-500 focus:outline-none"},null,512),[[f,e.email]])]),s("div",tt,[st,h(s("input",{type:"password",id:"password","onUpdate:modelValue":t[1]||(t[1]=a=>e.password=a),required:"",class:"p-2 text-gray-500 focus:outline-none"},null,512),[[f,e.password]])]),s("div",rt,[ot,h(s("input",{type:"password",id:"confirmPassword","onUpdate:modelValue":t[2]||(t[2]=a=>e.confirmPassword=a),required:"",class:"p-2 text-gray-500 focus:outline-none"},null,512),[[f,e.confirmPassword]])]),at,M(r,{class:"text-sm text-black mt-6 text-center",to:{name:"Login"}},{default:k(()=>[it,nt]),_:1})],32)])}var ct=A(Ye,[["render",lt]]);const dt="https://oyioqvxlilouegwbeekh.supabase.co",ut="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJvbGUiOiJhbm9uIiwiaWF0IjoxNjQzMDQ0MjY5LCJleHAiOjE5NTg2MjAyNjl9.kTzSGH01qKcDB7tuNFODKL20eBZZm8srXFI02ZVFOD8",V=E(dt,ut),T=J({user:{}});const mt={props:{path:String},emits:["upload","update:path"],setup(i,{emit:t}){const{path:n}=B(i),e=l("10em"),o=l(!1),c=l(""),r=l(),a=async()=>{try{const{data:p,error:y}=await V.storage.from("avatars").download(n.value);if(y)throw y;c.value=URL.createObjectURL(p)}catch(p){console.error("Error downloading image: ",p.message)}},m=async p=>{r.value=p.target.files;try{if(o.value=!0,!r.value||r.value.length===0)throw new Error("You must select an image to upload.");const y=r.value[0],U=y.name.split(".").pop(),I=`${`${Math.random()}.${U}`}`;let{error:b}=await V.storage.from("avatars").upload(I,y);if(b)throw b;t("update:path",I),t("upload")}catch(y){alert(y.message)}finally{o.value=!1}};return H(n,()=>{n.value&&a()}),{path:n,size:e,uploading:o,src:c,files:r,uploadAvatar:m}}},pt={class:"flex flex-col items-center"},vt=["src"],yt={class:"text-center py-10"},_t={class:"mt-6 py-2 px-6 rounded-sm self-start text-sm text-white bg-primaryc duration-200 border-solid border-2 boder-transperent hover:border-primaryc hover:bg-white hover:text-primaryc",for:"single"},ht=["disabled"];function ft(i,t,n,e,o,c){return d(),u("div",null,[s("div",pt,[e.src?(d(),u("img",{key:0,src:e.src,alt:"Avatar",class:"avatar image",style:O({height:e.size,width:e.size})},null,12,vt)):(d(),u("div",{key:1,class:"avatar no-image",style:O({height:e.size,width:e.size})},null,4)),s("div",yt,[s("label",_t,v(e.uploading?"Uploading ...":"Upload new Picture"),1),s("input",{style:{visibility:"hidden",position:"absolute"},type:"file",id:"single",accept:"image/*",onChange:t[0]||(t[0]=(...r)=>e.uploadAvatar&&e.uploadAvatar(...r)),disabled:e.uploading},null,40,ht)])])])}var gt=A(mt,[["render",ft]]);const xt={components:{Avatar:gt},setup(){const i=l(!0),t=l(""),n=l(""),e=l(""),o=l(""),c=l(null),r=l(null);async function a(){try{i.value=!0,T.user=V.auth.user();let{data:p,error:y,status:U}=await V.from("profiles").select("username, gender, avatar_url, interests").eq("id",T.user.id).single();if(y&&U!==406)throw y;p&&(t.value=p.username,n.value=p.gender,o.value=p.avatar_url,e.value=p.interests)}catch(p){alert(p.message)}finally{i.value=!1}}async function m(){try{i.value=!0,T.user=V.auth.user();const p={id:T.user.id,username:t.value,gender:n.value,avatar_url:o.value,updated_at:new Date,interests:e.value};let{error:y}=await V.from("profiles").upsert(p,{returning:"minimal"});if(r.value="Profile successfully updated.",setTimeout(()=>{r.value=null},5e3),y)throw y}catch(p){c.value=p.message,setTimeout(()=>{r.value=null},5e3)}finally{i.value=!1}}return Z(()=>{a()}),{store:T,loading:i,username:t,gender:n,avatar_url:o,interests:e,errorMsg:c,statusMsg:r,updateProfile:m}}},bt={class:"max-w-screen-sm mx-auto px-4 py-10"},wt={key:0,class:"mb-10 p-4 rounded-md shadow-md bg-light-grey"},At={class:"test-primaryc"},kt={class:"test-red-500"},$t={class:"flex flex-col mb-2"},Ut=s("label",{for:"email",class:"mb-1 text-sm text-primaryc"},"Email",-1),Lt=["value"],Mt={class:"flex flex-col mb-2"},Pt=s("label",{for:"username",class:"mb-1 text-sm text-primaryc"},"Username",-1),Vt={class:"flex flex-col mb-2"},It=s("label",{for:"gender",class:"mb-1 text-sm text-primaryc"},"Gender",-1),Ct={class:"flex flex-col mb-2"},Tt=s("label",{for:"interests",class:"mb-1 text-sm text-primaryc"},"Interests",-1),Nt=["value","disabled"];function qt(i,t,n,e,o,c){const r=$("Avatar");return d(),u("div",bt,[e.statusMsg||e.errorMsg?(d(),u("div",wt,[s("p",At,v(e.statusMsg),1),s("p",kt,v(e.errorMsg),1)])):_("",!0),s("form",{onSubmit:t[4]||(t[4]=q((...a)=>e.updateProfile&&e.updateProfile(...a),["prevent"])),class:"p-8 flex flex-col bg-light-grey rounded-md shadow-lg"},[M(r,{path:e.avatar_url,"onUpdate:path":t[0]||(t[0]=a=>e.avatar_url=a),onUpload:e.updateProfile},null,8,["path","onUpload"]),s("div",$t,[Ut,s("input",{id:"email",type:"text",value:e.store.user.email,disabled:"",required:"",class:"p-2 text-gray-500 focus:outline-none"},null,8,Lt)]),s("div",Mt,[Pt,h(s("input",{id:"username",type:"text",placeholder:"Please set a Username","onUpdate:modelValue":t[1]||(t[1]=a=>e.username=a),class:"p-2 text-gray-500 focus:outline-none"},null,512),[[f,e.username]])]),s("div",Vt,[It,h(s("input",{id:"gender",type:"text",placeholder:"Please set a Gender.","onUpdate:modelValue":t[2]||(t[2]=a=>e.gender=a),class:"p-2 text-gray-500 focus:outline-none"},null,512),[[f,e.gender]])]),s("div",Ct,[Tt,h(s("textarea",{id:"interests",type:"textarea","onUpdate:modelValue":t[3]||(t[3]=a=>e.interests=a),placeholder:"Write something about yourself.",rows:"4",class:"p-2 h-50 text-gray-500 focus:outline-none resize-none"},null,512),[[f,e.interests]])]),s("button",{type:"submit",value:e.loading?"Loading ...":"Update",disabled:e.loading,class:"mt-6 py-2 px-6 rounded-sm self-start text-sm text-white bg-primaryc duration-200 border-solid border-2 boder-transperent hover:border-primaryc hover:bg-white hover:text-primaryc"},"Update",8,Nt)],32)])}var Ot=A(xt,[["render",qt]]),jt="assets/trash.8e4eb5f3.png";const zt={setup(){const i=l(""),t=l("select-activity"),n=l(""),e=l([]),o=l(""),c=l(""),r=l(""),a=l(null),m=l(null),p=()=>{if(t.value==="others"){e.value.push({id:X(),description:""});return}};return{ActivityName:i,ActivityType:t,ActivityDescription:n,ActivityDate:o,ActivityTime:c,ActivityLocation:r,activity:e,statusMsg:a,errorMsg:m,addActivity:p,removeActivity:I=>{if(e.value.length>1){e.value=e.value.filter(b=>b.id!==I);return}m.value="You must have at least one activity",setTimeout(()=>{m.value=null},5e3)},activityChange:()=>{e.value=[],p()},createActivity:async I=>{try{const{error:b}=await g.from("activities").insert({name:i.value,type:t.value,date:o.value,time:c.value,location:r.value,activity:e.value});if(b)throw b;a.value="Sucess. Activity Created",i.value=null,t.value="select-activity",e.value=[],setTimeout(()=>{a.value=null},5e3)}catch(b){m.value=b.message,setTimeout(()=>{m.value=null},5e3)}}}}},Dt={class:"max-w-screen-md mx-auto px-4 py-10"},Rt={key:0,class:"mb-10 p-4 bg-light-grey rounded-md"},St={class:"text-black-500"},Jt={class:"text-red-500"},Et={class:"p-8 flex items-start bg-light-grey rounded-md shadow-lg"},Ft=s("h1",{class:"text-2xl text-primaryc"},"Create an Activity",-1),Bt={class:"flex flex-col"},Ht=s("label",{for:"activity-name",class:"mb-1 text-sm text-primaryc"},"Activity Name",-1),Gt={class:"flex flex-col"},Yt=s("label",{for:"select-activity",class:"mb-1 text-sm text-primaryc"},"Activity Type",-1),Zt=s("option",{value:"select-activity"},"Select Activity Type",-1),Kt=s("option",{value:"sports"},"Sports",-1),Xt=s("option",{value:"others"},"Others",-1),Qt=[Zt,Kt,Xt],Wt={key:0,class:"flex flex-col py-4 gap-y-4"},es={class:"flex flex-col md:w-2/3"},ts=s("label",{for:"activity",class:"mb-1 text-sm text-primaryc"}," Activity Description ",-1),ss=["onUpdate:modelValue"],rs={class:"flex flex-col flex-1"},os=s("label",{for:"duration",class:"mb-1 text-sm text-primaryc"}," Duration ",-1),as=["onUpdate:modelValue"],is=["onClick"],ns={class:"flex flex-col"},ls=s("label",{for:"activity-date",class:"mb-1 text-sm text-primaryc"},"Activity Date",-1),cs={class:"flex flex-col"},ds=s("label",{for:"activity-time",class:"mb-1 text-sm text-primaryc"},"Activity Time",-1),us={class:"flex flex-col"},ms=s("label",{for:"activity-location",class:"mb-1 text-sm text-primaryc"},"Activity Location",-1),ps=s("button",{type:"submit",class:"mt-6 py-2 px-6 rounded-sm self-start text-sm text-white bg-primaryc duration-200 border-solid border-2 boder-transperent hover:border-primaryc hover:bg-white hover:text-primaryc"}," Create ",-1);function vs(i,t,n,e,o,c){return d(),u("div",Dt,[e.statusMsg||e.errorMsg?(d(),u("div",Rt,[s("p",St,v(e.statusMsg),1),s("p",Jt,v(e.errorMsg),1)])):_("",!0),s("div",Et,[s("form",{onSubmit:t[7]||(t[7]=q((...r)=>e.createActivity&&e.createActivity(...r),["prevent"])),class:"flex flex-col gap-y-5 w-full"},[Ft,s("div",Bt,[Ht,h(s("input",{type:"text",required:"",class:"p-2 text-gray-500 focus:outline-none",placeholder:"Activity Name",id:"activity-name","onUpdate:modelValue":t[0]||(t[0]=r=>e.ActivityName=r)},null,512),[[f,e.ActivityName]])]),s("div",Gt,[Yt,h(s("select",{required:"",class:"p-2 text-gray-500 focus:outline-none",id:"select-activity",onChange:t[1]||(t[1]=(...r)=>e.activityChange&&e.activityChange(...r)),"onUpdate:modelValue":t[2]||(t[2]=r=>e.ActivityType=r)},Qt,544),[[K,e.ActivityType]]),e.ActivityType==="others"?(d(),u("div",Wt,[(d(!0),u(D,null,R(e.activity,(r,a)=>(d(),u("div",{class:"flex flex-col gap-x-6 gap-y-2 relative md:flex-row",key:a},[s("div",es,[ts,h(s("input",{required:"",type:"text",class:"p-2 w-full text-gray-500 focus:outline-none","onUpdate:modelValue":m=>r.description=m},null,8,ss),[[f,r.description]])]),s("div",rs,[os,h(s("input",{required:"",type:"text",class:"p-2 w-full text-gray-500 focus:outline-none","onUpdate:modelValue":m=>r.duration=m},null,8,as),[[f,r.duration]]),s("img",{onClick:m=>e.removeActivity(r.id),src:jt,class:"h-4 w-auto absolute -left-5 cursor-pointer",alt:""},null,8,is)])]))),128)),s("button",{onClick:t[3]||(t[3]=(...r)=>e.addActivity&&e.addActivity(...r)),class:"mt-6 py-2 px-6 rounded-sm self-start text-sm text-white bg-primaryc duration-200 border-solid border-2 boder-transperent hover:border-primaryc hover:bg-white hover:text-primaryc"}," Add Activity ")])):_("",!0)]),s("div",ns,[ls,h(s("input",{required:"",type:"date",class:"p-2 text-gray-500 focus:outline-none",id:"activity-date","onUpdate:modelValue":t[4]||(t[4]=r=>e.ActivityDate=r)},null,512),[[f,e.ActivityDate]])]),s("div",cs,[ds,h(s("input",{required:"",type:"time",class:"p-2 text-gray-500 focus:outline-none",id:"activity-time","onUpdate:modelValue":t[5]||(t[5]=r=>e.ActivityTime=r)},null,512),[[f,e.ActivityTime]])]),s("div",us,[ms,h(s("input",{required:"",type:"text",class:"p-2 text-gray-500 focus:outline-none",id:"activity-location","onUpdate:modelValue":t[6]||(t[6]=r=>e.ActivityLocation=r)},null,512),[[f,e.ActivityLocation]])]),ps],32)])])}var ys=A(zt,[["render",vs]]);const _s={name:"view-activity",setup(){const i=l(null),t=l(null),n=l(null),e=l(null),o=l(null),c=G(),r=F(()=>j.state.user),a=l(null),m=l(null),p=l(null);let y;const U=c.params.id,N=async()=>{try{const{data:x,error:w}=await g.from("activities").select("*").eq("id",U);if(w)throw w;i.value=x[0],n.value=!0}catch(x){e.value=x.message,setTimeout(()=>{e.value=null},5e3)}};N(),(async()=>{try{const{data:x,error:w}=await g.from("profiles").select("username").eq("id",r.value.id);if(w)throw w;p.value=x[0].username,y=x[0].username}catch(x){e.calue=x.message,setTimeout(()=>{e.value=null},5e3)}})(r.value.id);const b=async()=>{const x=[];let w=[];try{const{data:L,error:Zs}=await g.from("instanceOfActivities").select("user").eq("activity_id",U);x.value=L}catch(L){e.value=L.message,setTimeout(()=>{e.value=null},5e3)}x.value.forEach(L=>{w.push(L.user)}),m.value=!0,a.value=w};return b(),{data:i,dataLoaded:n,errorMsg:e,statusMsg:o,getData:N,user:r,joinActivity:async x=>{try{const{data:w,error:L}=await g.from("instanceOfActivities").insert({activity_id:U,user:x});if(L)throw L;o.value="You joined this activity",setTimeout(()=>{o.value=null},5e3)}catch(w){e.value=w.message,setTimeout(()=>{e.value=null},5e3)}window.location.reload()},checkParticipation:b,members:a,membersLoaded:m,username:p,userParticipated:t}}},hs={class:"max-w-screen-sm mx-auto px-4 py-10"},fs={key:0,class:"mb-10 p-4 rounded-md shadow-md bg-light-grey"},gs={class:"test-primaryc"},xs={class:"test-red-500"},bs={key:1},ws={class:"flex flex-col items-center p-8 rounded-md shadow-md bg-light-grey relative"},As={class:"mt-2 py-1 px-3 text-xs text-white bg-primaryc shadow-md rounded-lg"},ks={class:"mt-2 text-center text-xl text-primaryc"},$s={class:"mt-2 text-center text-xl text-primaryc"},Us={key:0,class:"mt-2 text-center text-xl text-primaryc"},Ls={key:1,class:"flex self-center gap-x-2"},Ms={key:2,class:"flex self-center gap-x-2"},Ps={class:"flex flex-col mt-6 items-center p-8 rounded-md shadow-md bg-light-grey relative"},Vs={key:0,class:"mt-2 py-1 px-3 text-xl text-white bg-primaryc shadow-md rounded-lg"},Is={class:"mt-2 text-center text-xl text-primaryc cursor-pointer"};function Cs(i,t,n,e,o,c){const r=$("router-link");return d(),u("div",hs,[e.statusMsg||e.errorMsg?(d(),u("div",fs,[s("p",gs,v(e.statusMsg),1),s("p",xs,v(e.errorMsg),1)])):_("",!0),e.dataLoaded?(d(),u("div",bs,[s("div",ws,[s("p",As,v(e.data.date)+" - "+v(e.data.type),1),s("h1",ks,v(e.data.name),1),s("p",$s," In "+v(e.data.location)+" at "+v(e.data.time),1),e.data.type=="others"?(d(),u("p",Us," Doing "+v(e.data.activity[0].description)+" for "+v(e.data.activity[0].duration),1)):_("",!0),e.members!=null&&e.members.includes(e.username)?(d(),u("div",Ls,[s("div",{class:"mt-2 py-2 px-6 rounded-sm self-start cursor-pointer text-sm text-white bg-primaryc duration-200 border-solid border-2 boder-transperent hover:border-primaryc hover:bg-white hover:text-primaryc",onClick:t[0]||(t[0]=a=>e.joinActivity(e.username))}," Leave this Activity ")])):(d(),u("div",Ms,[s("div",{class:"mt-2 py-2 px-6 rounded-sm self-start cursor-pointer text-sm text-white bg-primaryc duration-200 border-solid border-2 boder-transperent hover:border-primaryc hover:bg-white hover:text-primaryc",onClick:t[1]||(t[1]=a=>e.joinActivity(e.username))}," Join this Activity ")]))]),s("div",Ps,[e.membersLoaded?(d(),u("p",Vs," people participating: ")):_("",!0),(d(!0),u(D,null,R(e.members,(a,m)=>(d(),C(r,{to:{name:"ViewProfile",params:{username:a}},key:m},{default:k(()=>[s("p",Is,v(a),1)]),_:2},1032,["to"]))),128))])])):_("",!0)])}var Ts=A(_s,[["render",Cs]]);const Ns={props:{path:String},setup(i){const{path:t}=B(i),n=l("30em"),e=l(!1),o=l(""),c=l(),r=async()=>{try{const{data:a,error:m}=await V.storage.from("avatars").download(t.value);if(m)throw m;o.value=URL.createObjectURL(a)}catch(a){console.error("Error downloading image: ",a.message)}};return H(t,()=>{t.value&&r()}),{path:t,size:n,uploading:e,src:o,files:c}}},qs={class:"flex flex-col items-center"},Os=["src"];function js(i,t,n,e,o,c){return d(),u("div",null,[s("div",qs,[e.src?(d(),u("img",{key:0,src:e.src,alt:"Avatar",class:"avatar image",style:O({height:e.size,width:e.size})},null,12,Os)):(d(),u("div",{key:1,class:"avatar no-image",style:O({height:e.size,width:e.size})},null,4))])])}var zs=A(Ns,[["render",js]]);const Ds={name:"view-profile",components:{Avatar:zs},setup(){const i=l(null),t=G(),n=l(!0),e=l(""),o=l(""),c=l(""),r=t.params.username;async function a(){try{n.value=!0,j.user=g.auth.user();let{data:m,error:p,status:y}=await g.from("profiles").select("username, gender, avatar_url").eq("username",r).single();if(p&&y!==406)throw p;m&&(e.value=m.username,o.value=m.gender,c.value=m.avatar_url,i.value=!0,console.log(c.value))}catch(m){alert(m.message)}finally{n.value=!1}}return a(),{dataLoaded:i,loading:n,username:e,gender:o,avatar_url:c}}},Rs={class:"max-w-screen-sm mx-auto px-4 py-10"},Ss={class:"p-8 flex flex-col items-center bg-light-grey rounded-md shadow-lg"},Js={class:"text-primaryc text-xl"},Es={class:"text-primaryc"},Fs=s("p",{class:"text-primaryc"},"Location:",-1);function Bs(i,t,n,e,o,c){const r=$("Avatar");return d(),u("div",Rs,[s("div",Ss,[s("h1",Js,"Profile of "+v(e.username),1),M(r,{path:e.avatar_url,"onUpdate:path":t[0]||(t[0]=a=>e.avatar_url=a)},null,8,["path"]),s("p",Es,"Gender: "+v(e.gender),1),Fs])])}var Hs=A(Ds,[["render",Bs]]);const Gs=[{path:"/",name:"Home",component:Te,meta:{title:"Home",auth:!0}},{path:"/login",name:"Login",component:Ge,meta:{title:"Login",auth:!1}},{path:"/register",name:"Register",component:ct,meta:{title:"Sign Up",auth:!1}},{path:"/profile",name:"Profile",component:Ot,meta:{title:"Profile",auth:!0}},{path:"/activity",name:"Activity",component:ys,meta:{title:"Create Activity",auth:!0}},{path:"/view-activity/:id",name:"ViewActivity",component:Ts,meta:{title:"View Activity",auth:!0}},{path:"/view-profile/:username",name:"ViewProfile",component:Hs,meta:{title:"View Profile",auth:!0}}],S=Q({history:W(),routes:Gs});S.beforeEach((i,t,n)=>{document.title=`${i.meta.title} | Meet People`,n()});S.beforeEach((i,t,n)=>{const e=g.auth.user();if(i.matched.some(o=>o.meta.auth)){if(e){n();return}n({name:"Login"});return}n()});ee(be).use(S).mount("#app");
